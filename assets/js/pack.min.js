(function(e){function ra(){function a(a){b&&a(b);var d=indexedDB.open("quire",1);d.onsuccess=function(){a(b=d.result)};d.onerror=function(){a()}}var b;return{get:function(b,d){a(function(a){if(a){var k=a.transaction("dcache","readonly").objectStore("dcache").get(b);k.onsuccess=function(){var a=k.result;d(a?JSON.parse(a.data):null)};k.onerror=function(){d()}}else d()})},put:function(b,d,g){a(function(a){function f(){g&&(g(),g=null)}a?(a=a.transaction("dcache","readwrite").objectStore("dcache"),a=d?
a.put({id:b,data:JSON.stringify(d)}):a.delete(b),a.onsuccess=a.onerror=f):f()})}}}function sa(){return{get:function(a,b){b(G(a))},put:function(a,b,c){F(a,b);c&&c()}}}function X(){null==e.inCgf&&(inCgf=null!=G("inCgf"));return inCgf}function Y(a){return a}function ta(a){return a&&(a.startsWith("https://quire.s3.amazonaws.com/")||"https://quire.s3.amazonaws.com"==a)?"/quis3"+a.substring(30):a}function ua(a){return a&&(a.startsWith("/quis3/")||"/quis3"==a)?"https://quire.s3.amazonaws.com"+a.substring(6):
a}function M(a){null!=a&&null==a.offsetWidth&&M(null)}function va(a){var b=qrLang[1];a=Math.floor(((new Date).getTime()-(new Date(a)).getTime())/6E4);if(0<=a){if(2>a)return b[wa];if(60>a)return b[xa].replace("[=n]",a);a=Math.floor(a/60);if(2>a)return b[ya];if(24>a)return b[za].replace("[=n]",a);if(48>a)return b[Aa];a=Math.floor(a/24);if(8>a)return b[Ba].replace("[=n]",a)}}function N(a,b){try{var c=sessionStorage[a];return null!=c&&0!=b?JSON.parse(c):c}catch(d){}}function H(a,b,c){try{null==b?sessionStorage.removeItem(a):
sessionStorage[a]=0!=c?JSON.stringify(b):b}catch(d){}}function G(a,b){try{var c=localStorage[a];return null!=c&&0!=b?JSON.parse(c):c}catch(d){}}function F(a,b,c){try{null==b?localStorage.removeItem(a):localStorage[a]=0!=c?JSON.stringify(b):b}catch(d){}}function Z(a,b,c){if(null!=a){c=c||{};var d=0!=c.encode;I();z=$('<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+(d?O(b):b)+"</div></div>");c.clz&&z.addClass(c.clz);b=z;var d=c.placement,g=c.body;d||(d="bottom");b.detach().css({top:0,
left:0,display:"block"}).addClass(d);g?$(document.body).append(b):b.insertAfter(a);g=$(a);a=$.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():null,{scroll:g.scrollTop(),width:g.outerWidth(),height:g.outerHeight()},g.offset());var g=b[0].offsetWidth,e=b[0].offsetHeight,f,h;"top"==d?(f=Math.round(a.top)-e,h=Math.round(a.left+(a.width-g)/2)):"bottom"==d&&(f=Math.round(a.top+a.height),h=Math.round(a.left+(a.width-g)/2));b.addClass(d);var m=d,d=b[0].offsetWidth,t=b[0].offsetHeight;
a=!1;g=$(b).children()[0];b.offset({top:f,left:h}).addClass("in");var e=b[0].offsetWidth,n=b[0].offsetHeight;"top"==m&&n!=t&&(f+=t-n,a=!0);"bottom"==m||"top"==m?(m=0,0>h&&(m=-2*h,h=0,b.offset({top:f,left:h}),e=b[0].offsetWidth),g.style.left=aa(m-d+e,e)):g.style.top=aa(n-t,n);a&&b.offset({top:f,left:h});c.fixPosition&&(c=z.offset(),z.offset({top:c.top+z.children()[0].offsetHeight,left:c.left}))}}function aa(a,b){return a?50*(1-a/b)+"%":""}function I(){z&&z.remove()}function ba(a,b){if(!browser.mobile)$(a).on("mouseenter",
function(c){Z(a,b)}).on("mouseleave",function(a){I()})}function P(a,b,c,d,g,e,f){g||(g="x32");e||(e="");e+=f?" partner-icon":"";return a?['<img class="img-icon ',g," ",e,'" src="',a,'" alt="',O(b),,'">'].join(""):['<div class="img-icon bg ',g," ",e," ","iconc-"+d,'">',O(c),"</div>"].join("")}function O(a){return $("<div></div>").text(a).html()}function ca(){}function C(){da||(da=!0,$(document).on("click.bs.dropdown","[data-toggle=dropdown]",function(a){var b=$(a.currentTarget),c=b.parent();setTimeout(function(){b.data("dropdownInited")||
(b.data("dropdownInited",!0),c.hasClass("open")||(Ca(c[0]),ea(b)))},10);return!1}).on("click.bs.dropdown.data-api",function(a){a=$("[data-toggle=dropdown]").parent();var b=$.Event("hide.bs.dropdown");a.trigger(b);b.isDefaultPrevented()||a.removeClass("open").trigger($.Event("hidden.bs.dropdown"))}).on("click","#header .dropdown-menu, #homeBanner .dropdown-menu",function(a){a.stopPropagation()}))}function Ca(a){$(a).on("click.bs.dropdown","[data-toggle=dropdown]",function(a){ea($(a.currentTarget));
return!1})}function ea(a){a=a.parent();var b=a.hasClass("open"),c=document.createEvent("MouseEvent");c.initMouseEvent("click",!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,document);$("body")[0].dispatchEvent(c);b||(b=$.Event("show.bs.dropdown"),a.trigger(b),b.isDefaultPrevented()||a.toggleClass("open").trigger($.Event("shown.bs.dropdown")))}function fa(a){if(a==document.body||a.parentNode)ga(a),new ha(a)}function ga(a){var b;b=a==document.body||a.parentNode?null!=$(a).data(J):!1;b&&$(a).data(J).destroy()}function Da(){if(K){K=
null;var a=sessRefer();if(N(K,!1)!=a)return H(K,a,!1),a}}function Q(a,b,c,d,g){b+=20;var e=Ea(b,c,d,g);a.scrollTo(e);b<g&&setTimeout(function(){Q(a,b,c,d,g)},20)}function Ea(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a+b;--a;return-c/2*(a*(a-2)-1)+b}function ia(){function a(a){var d=b.scrollTop(),g=b.height();$(".anim-init:not(.anim-end)").each(function(){var a=$(this);0!=d&&d+.7*g>a.offset().top&&a.addClass("anim-end")})}var b=$(e);b.scroll(a).resize(a);a()}function Fa(){$("#notification").length&&Ga();
C();ia();setTimeout(Ha,500)}function Ia(){ja();ia()}function ja(){$("#notification").length&&notification.init();C();R()}function ka(){C();la()}function Ja(){$("#wrap").hasClass("anonymous-view")||la(!0)}function Ka(){C()}function Ha(){var a=$(".cookie-message");if(a.length){var b="ckemg:"+currentUser();G(b)?a.remove():(a.addClass("in"),a.on("click","button",function(c){a.remove();F(b,!0)}))}}function La(){var a=new p($(".f-options .scroll-content")[0]);$(".f-options").on("shown.bs.dropdown",function(){a.syncSize()});
ma($(".host-row"));$(".host-row").on("click",".radio label > input",function(a){na($(a.currentTarget).data("value"))}).on("click",".dropdown-menu .u-item > a",function(a){na($(a.currentTarget).data("value"),$(a.currentTarget).text());a.preventDefault()});$(".not-allow-collapse").click(function(a){$(this).parent().removeClass("collapsed");a.preventDefault()});$(".contact-row input").change(function(){$("#contacts").val(this.checked?"1":"")})}function na(a,b){$(".f-options").toggleClass("hide","global"==
a);$("#acceptBtn").toggleClass("disabled",!a);$("#host").val(a);$(".f-options .options-value").text(b||"")}function S(a,b,c,d,g,e,f){sendQS(["oau.srch",[a,b,c,d,g,e]],f)}function Ma(a,b,c,d){sendQS(["ical",[a,b,c]],d)}function ma(a){var b;a.on("mouseenter",".dropdown-menu .u-item > a",function(a){b=a.currentTarget;b.focus()}).on("mouseleave",".dropdown-menu",function(a){b&&b.blur()})}function Na(){C();R()}function Oa(){function a(){var a=b.scrollTop(),a=d-a;k.css("top",(a<g?g:a)+"px").css("bottom",
"");var a=k.height(),m=k.offset().top+a-f.offset().top;0<m&&k.css("bottom",b.height()-(k.position().top+a)+m+"px")}var b=$(e),c=$(".app-list"),d=c[0].offsetTop,g=$(".header-wrap").height()+25,k=$(".app-category"),f=$(".footer-wrap"),h=new r($(".app-search"),c);b.scroll(a).resize(a);h.syncActiveItem();$(".app-category").on("click","a",function(a){a.shiftKey||a.ctrlKey||a.metaKey||a.altKey||(a.preventDefault(),a=a.currentTarget.href.split("?category="),h.loadCategory(1<a.length?a[1]:null))});$(".more-row").on("click",
"a",function(a){a.preventDefault();h.loadMore()});a();for(var c=e.location.search,c=c.length?c.substring(1).split("&"):[],m=c.length;0<=--m;){var t=c[m].split("=");if("text"==t[0]){h.currentText=h.inp[0].value=t[1];break}}}function Pa(){var a,b=new r($("#search"),$("#search .search-results"),{dropdown:!0});b.$element.on("keydown","input",function(c){switch(c.keyCode){case 27:c=b.inp[0];0==c.value.length?c.blur():(b.$element.removeClass("open"),b.$element.removeClass("dirty"),c.value="");break;case 38:b.$element.hasClass("open")&&
(a=b.$list.find(".u-item:last a")[0],a.focus());break;case 40:b.$element.hasClass("open")&&(a=b.$list.find(".u-item a")[0],a.focus())}}).on("keydown",".search-results",function(c){switch(c.keyCode){case 27:b.inp.focus();break;case 38:a&&(c=$(a).parent().prev().find("a"),c.length?(a=c[0],a.focus()):b.inp.focus());break;case 40:a&&(c=$(a).parent().next().find("a"),c.length?(a=c[0],a.focus()):b.inp.focus())}}).on("mouseenter",".dropdown-menu .u-item > a",function(b){a=b.currentTarget;a.focus()}).on("mouseleave",
".dropdown-menu",function(b){a&&a.blur()})}function Qa(){function a(a){var b=a.parents(".f-options");b.find(".active").removeClass("active");a.parent().addClass("active");b.find(".options-value").text(a.text()||"");a=a.data("value");switch(a){case "all":h=a;break;case "my":h=a;break;default:m=a}}var b=new p($(".target-options .scroll-content")[0]);$(".target-options").on("shown.bs.dropdown",function(){b.syncSize()});ma($(".cal-sync-config"));var c=$(".link-row input"),d=$(".target-options .options-value"),
g=$(".target-options .all-item"),k=$(".target-options .u-item:not(.all-item):first"),f=$(".logo-row").data("oid"),h,m,t=0==k.length;a($(".task-options .u-item:first a"));a((t?g:k).children().first());$(".cal-sync-config").on("click",".dropdown-menu .u-item > a",function(b){b.preventDefault();a($(b.currentTarget));var c=!m;b="my"==h;(c=!b&&c)&&d.text("");g[b?"removeClass":"addClass"]("hide");g.next()[b?"removeClass":"addClass"]("hide");$(".create-btn").toggleClass("disabled",c)});$("#body").on("click",
".copy-btn",function(a){c.select();document.execCommand("copy");a=c.parent();M(a[0]);a.addClass("copied")}).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",".copied-label",function(a){c.parent().removeClass("copied")}).on("click",".cancel-btn",function(a){a.preventDefault();e.history.back()}).on("click",".create-btn",function(a){a.preventDefault();Ma(m,"my"==h,f,function(a){"string"==$.type(a)?showAlert($("#body"),a,"alert-danger"):(a=a[1],1==c.data("plain")&&(a=a+(0<=a.indexOf("?")?
"&":"?")+"f=plain"),c[0].value=a,$("body").addClass("link-created"))})})}function la(a){$("#notification")[0]&&notification.init(a);R()}function R(){var a=$("#header .navbar-collapse");$("#menu-toggle").click(function(){var b=a.hasClass("in");a[b?"removeClass":"addClass"]("in");$(this)[b?"removeClass":"addClass"]("open");$(".qr-collapse-navbar,.qr-collapse-navbar-768")[b?"removeClass":"addClass"]("navbar-fixed-bottom")})}function Ga(){function a(a){$(a.currentTarget).append(g)}var b=$("#notification"),
c=$("#home-noti"),d=c.find(".notification-count"),g=b.parent().find(".arrow-dropdown-menu");notification.init();b.parent().on("show.bs.dropdown",a);c.parent().on("show.bs.dropdown",a).on("shown.bs.dropdown",function(a){b.parent().trigger("shown.bs.dropdown")});b.on("updateNotificationCount",function(a,b){c[0<b?"addClass":"removeClass"]("hasNew");d.html(b)});var e=$(g.find(".dropdown-header")[0].lastChild).text().trim();ba(c[0],e)}var w=e.navigator.userAgent.toLowerCase(),E=e.navigator.platform.toLowerCase(),
q=e.document.documentElement;e.browser={};browser.mobile=/android|iphone|ipad/.test(w)||/iphone|ipad/.test(E);browser.ios=/iphone|ipad/.test(w)||/iphone|ipad/.test(E);browser.android=/android/.test(w);for(var E=[["ie",/(msie) ([\w.]+)/],["ie",/trident\/.+(rv:)([\w.]+)/],["edge",/(edge)\/([\w.]+)/],["firefox",/(firefox)\/([\w.]+)/],["chrome",/(chrome|crios)[ /]([\w.]+)/],["safari",/(version)\/([\w.]+).*safari/]],T=0;T<E.length;T++){var U=E[T],oa=U[1].exec(w);if(oa){browser[U[0]]=!0;browser.version=
parseFloat(oa[2]);$(q).addClass(U[0]);break}}browser.mobile&&$(q).addClass("mobile");browser.ios&&$(q).addClass("ios");browser.android&&(w=e.screen,$(q).addClass(640<w.width&&640<w.height?"android-tablet":"android-mobile"));"ontouchstart"in q||$(q).addClass("no-touch");e.cacheDal=!e.indexedDB||browser.safari&&10>browser.version?sa():ra();String.prototype.startsWith||(String.prototype.startsWith=function(a,b){b=b||0;return this.indexOf(a,b)===b});e.isCE=0>location.protocol.indexOf("http");var pa="http:"!=
location.protocol;e.currentUser=function(){return $("body").data("user-id")||""};e.activeOid=function(){return $("body").data("atv-id")||""};browser.ie&&(e.downloadOnIE=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="blob";c.onreadystatechange=function(a){4==c.readyState&&navigator.msSaveBlob(this.response,b)};c.send()});e.hiliteSyntax=function(a){e.hljs&&$("pre code",a).each(function(a,c){hljs.highlightBlock(c)})};var z,V=function(a,b){this.x=a;this.y=b};V.prototype.distanceTo=
function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};e.ntGetApp=function(a){var b=sessRefer();b&&sendQS([Ra,[b]],ca,ca);gae("new","get",a);browser.mobile&&gacvt()};e.sendQS=function(a,b,c){var d=$("body").data("qs")||"qs";return $.ajax({type:"POST",url:(isCE?"https://quire.io/":"/")+d,data:JSON.stringify(a),contentType:"application/json;charset=UTF-8"}).done(b).fail(function(a){c?c(a):(a=netErrorMsg(a))&&showAlert($("#body"),a,"alert-danger")})};e.netErrorMsg=function(a){switch(a.status){case 0:return"networkErrorM"in
e?networkErrorM:"Unable to reach Quire. Please check your internet connection.";case 403:return"e403M"in e?e403M:"Sorry, you're not allowed to access this feature.";case 404:return"e404M"in e?e404M:"Sorry, we couldn't find what you're looking for.";case 413:return"e413M"in e?e413M:"Sorry, your request is too large.";default:return"internalErrorM"in e?internalErrorM:"Sorry, we encountered an unexpected error."}};e.showTooltip=function(a,b,c){Z(a,b,c)};e.clearTooltip=function(){I()};var W;e.showAlert=
function(a,b,c){if(a){"string"==typeof a&&(a=$(a)[0]);clearAlert();var d=$(a).children(".alert-wrapper");d.length||(d=$('<div class="row alert-wrapper"><div class="container"><div class="alert fade"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><p></p></div></div></div>'),$(a).prepend(d),$(document).on("click",function(a){clearAlert()}),d.on("click",".alert",function(a){$(a.target).hasClass("close")||a.stopPropagation()}));a=d.find(".alert");a.length||
(a=W,d.find(".container").append(a));a.attr("class","alert fade "+(c?c:""));a.find("p").html(b);a.addClass("in");W=a}};e.clearAlert=function(){$(W).removeClass("in").remove()};e.getClipboardData=function(a){a=a.clipboardData&&a.clipboardData.items;var b=[];if(a)for(var c=a.length;0<=--c;)b.push(a[c]);return b};e.getPastedData=function(a){a.stopPropagation();a.preventDefault();a=a.clipboardData||e.clipboardData;return browser.ie?["",a.getData("text")]:[a.getData("text/html"),a.getData("text/plain")]};
e.getClipboardText=function(a,b){navigator.clipboard.readText().then(a).catch(b)};e.reloadPage=function(){e.location.reload(!0)};e.jqSearch=function(a){var b=new Mark("body");b.unmark();a&&b.mark(a,{separateWordSearch:!1,filter:function(a){return 0<a.parentNode.offsetWidth}})};e.contUri=function(){var a=/[?&]continue=([^&]+)(&.*)?$/.exec(location.search);return null!=a?decodeURIComponent(a[1]):null};e.readS3=function(){return X()?ta:Y};var Ra="gtApp",wa="Now",xa="Mins",ya="Hr",za="Hrs",Aa="Day",Ba=
"Days",da=!1;e.dataLayer=e.dataLayer||[];e.gtag=function(){dataLayer.push(arguments)};e.gacvt=function(a){gtag("event","conversion",{send_to:"AW-1067329176/mNg6CJvTqoEBEJjN-PwD",event_callback:function(){"undefined"!=typeof a&&(e.location=a)}});return!1};var qa=/^(\/[wuvc]|r\/setting|apps\/dev\/)(\/.*)?$/,q=e.location.pathname,w=qa.test(q);pa&&!/^\/r\/.+\/confirm/i.test(q)?(gtag("js",new Date),gtag("config","UA-48347893-1",w?{allow_ad_personalization_signals:!1,send_page_view:!1}:null),w||gtag("config",
"AW-1067329176"),(q=currentUser())&&gtag("set",{user_id:q})):e["ga-disable-UA-48347893-1"]=!0;e.gae=function(a,b,c,d){gtag("event",b,{event_category:a,event_label:c||"",value:d||0})};e.gapg=function(a,b){var c=a.match(qa);null!=c&&(a=b=c[1]);c={};c["/"==a.substring(0)?"page_path":"page_location"]=a;b&&(c.page_title=b);gtag("config","UA-48347893-1",c)};e.gaWS=function(a,b,c){gae("ws",a,b,c)};e.logError=function(a,b,c){c&&(b=b+"\n"+c);gae("error",a,b);console.log("["+a+"] "+b)};e.gdrive=function(){function a(a){if(!e.isVisible()){var b=
null;a[google.picker.Response.ACTION]==google.picker.Action.PICKED&&(b=a[google.picker.Response.DOCUMENTS][0]);d(b)}}function b(){e=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).addView(google.picker.ViewId.DOCS).addView((new google.picker.DocsView(google.picker.ViewId.DOCS)).setEnableTeamDrives(!0)).setOAuthToken(g).setCallback(a).build();e.setVisible(!0)}function c(a){a&&!a.error&&(g=a.access_token,gapi.load("picker",
{callback:b}))}var d,g,e;return{cid:"945756434190-"+(pa?"79dh21cr8shodd2407bq8rvqdnfu7abo":"lv1n6lpgk3tmkad1kh88tlovij811inc")+".apps.googleusercontent.com",openPicker:function(a){d=a;gapi.auth.authorize({client_id:gdrive.cid,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!1},c)}}}();(function(){function a(a){a=d.json?JSON.stringify(a):String(a);return d.raw?a:encodeURIComponent(a)}function b(a,b){var e;if(d.raw)e=a;else a:{var h=a;0===h.indexOf('"')&&(h=h.slice(1,-1).replace(/\\"/g,
'"').replace(/\\\\/g,"\\"));try{h=decodeURIComponent(h.replace(c," "));e=d.json?JSON.parse(h):h;break a}catch(m){}e=void 0}return $.isFunction(b)?b(e):e}var c=/\+/g,d=$.cookie=function(c,e,f){if(void 0!==e&&!$.isFunction(e)){f=$.extend({},d.defaults,f);if("number"===typeof f.expires){var h=f.expires,m=f.expires=new Date;m.setTime(+m+864E5*h)}return document.cookie=[d.raw?c:encodeURIComponent(c),"=",a(e),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+
f.domain:"",f.secure?"; secure":""].join("")}f=c?void 0:{};for(var h=document.cookie?document.cookie.split("; "):[],m=0,t=h.length;m<t;m++){var n=h[m].split("="),l;l=n.shift();l=d.raw?l:decodeURIComponent(l);n=n.join("=");if(c&&c===l){f=b(n,e);break}c||void 0===(n=b(n))||(f[l]=n)}return f};d.defaults={};$.removeCookie=function(a,b){if(void 0===$.cookie(a))return!1;$.cookie(a,"",$.extend({},b,{expires:-1}));return!$.cookie(a)}})();(function(){function a(a,d){var e=$(a.target);if(a.which!=b.ENTER||
!e.is(":button")&&!e.is("textarea"))a.which==b.ESC&&(e.is("input")||e.is("textarea"))&&e.val()?e[0].value="":(e=$(a.currentTarget).find('[data-hotkey*="'+d+'"]')[0])&&e.click()}var b={ENTER:13,ESC:27};$(document).on("keydown",".modal.in,.full-dialog",function(c){switch(c.which){case b.ENTER:a(c,"enter");break;case b.ESC:a(c,"escape")}})})();(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.Mark=b()})(this,function(){var a=
"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},c=function(){function a(b,c){for(var n=0;n<c.length;n++){var l=c[n];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(b,l.key,l)}}return function(b,c,n){c&&
a(b.prototype,c);n&&a(b,n);return b}}(),d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],n;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(a[n]=c[n])}return a},g=function(){function a(m){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5E3;b(this,a);this.ctx=m;this.iframes=c;this.exclude=n;this.iframesTimeout=l}c(a,[{key:"getContexts",
value:function(){var a=void 0,b=[],a="undefined"!==typeof this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"===typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[];a.forEach(function(a){var m=0<b.filter(function(b){return b.contains(a)}).length;-1!==b.indexOf(a)||m||b.push(a)});return b}},{key:"getIframeContents",value:function(a,b){var c=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:function(){},l=void 0;try{var d=a.contentWindow,l=d.document;if(!d||!l)throw Error("iframe inaccessible");}catch(e){c()}l&&b(l)}},{key:"isIframeBlank",value:function(a){var b=a.getAttribute("src").trim();return"about:blank"===a.contentWindow.location.href&&"about:blank"!==b&&b}},{key:"observeIframeLoad",value:function(a,b,c){var l=this,d=!1,e=null,f=function y(){if(!d){d=!0;clearTimeout(e);try{l.isIframeBlank(a)||(a.removeEventListener("load",y),l.getIframeContents(a,b,c))}catch(f){c()}}};
a.addEventListener("load",f);e=setTimeout(f,this.iframesTimeout)}},{key:"onIframeReady",value:function(a,b,c){try{"complete"===a.contentWindow.document.readyState?this.isIframeBlank(a)?this.observeIframeLoad(a,b,c):this.getIframeContents(a,b,c):this.observeIframeLoad(a,b,c)}catch(l){c()}}},{key:"waitForIframes",value:function(a,b){var c=this,l=0;this.forEachIframe(a,function(){return!0},function(a){l++;c.waitForIframes(a.querySelector("html"),function(){--l||b()})},function(a){a||b()})}},{key:"forEachIframe",
value:function(b,c,n){var l=this,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},e=b.querySelectorAll("iframe"),f=e.length,g=0,e=Array.prototype.slice.call(e),y=function(){0>=--f&&d(g)};f||y();e.forEach(function(b){if(a.matches(b,l.exclude))y();else l.onIframeReady(b,function(a){c(b)&&(g++,n(a));y()},y)})}},{key:"createIterator",value:function(a,b,c){return document.createNodeIterator(a,b,c,!1)}},{key:"createInstanceOnIframe",value:function(b){return new a(b.querySelector("html"),
this.iframes)}},{key:"compareNodeIframe",value:function(a,b,c){if(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_PRECEDING)if(null!==b){if(b.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(a){var b=a.previousNode(),c=void 0,c=null===b?a.nextNode():a.nextNode()&&a.nextNode();return{prevNode:b,node:c}}},{key:"checkIframeFilter",value:function(a,b,c,l){var d=!1,e=!1;l.forEach(function(a,b){a.val===c&&(d=b,e=a.handled)});
if(this.compareNodeIframe(a,b,c))return!1!==d||e?!1===d||e||(l[d].handled=!0):l.push({val:c,handled:!0}),!0;!1===d&&l.push({val:c,handled:!1});return!1}},{key:"handleOpenIframes",value:function(a,b,c,l){var d=this;a.forEach(function(a){a.handled||d.getIframeContents(a.val,function(a){d.createInstanceOnIframe(a).forEachNode(b,c,l)})})}},{key:"iterateThroughNodes",value:function(a,b,c,l,d){for(var e=this,f=this.createIterator(b,a,l),g=[],h=[],v=void 0,k=void 0,B=function(){var a=e.getIteratorNode(f);
k=a.prevNode;return v=a.node};B();)this.iframes&&this.forEachIframe(b,function(a){return e.checkIframeFilter(v,k,a,g)},function(b){e.createInstanceOnIframe(b).forEachNode(a,function(a){return h.push(a)},l)}),h.push(v);h.forEach(function(a){c(a)});this.iframes&&this.handleOpenIframes(g,a,c,l);d()}},{key:"forEachNode",value:function(a,b,c){var l=this,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},e=this.getContexts(),f=e.length;f||d();e.forEach(function(e){var g=function(){l.iterateThroughNodes(a,
e,b,c,function(){0>=--f&&d()})};l.iframes?l.waitForIframes(e,g):g()})}}],[{key:"matches",value:function(a,b){var c="string"===typeof b?[b]:b,d=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;if(d){var e=!1;c.every(function(b){return d.call(a,b)?(e=!0,!1):!0});return e}return!1}}]);return a}(),k=function(){function a(c){b(this,a);this.opt=d({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],
wildcards:"disabled"},c)}c(a,[{key:"create",value:function(a){"disabled"!==this.opt.wildcards&&(a=this.setupWildcardsRegExp(a));a=this.escapeStr(a);Object.keys(this.opt.synonyms).length&&(a=this.createSynonymsRegExp(a));if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);this.opt.diacritics&&(a=this.createDiacriticsRegExp(a));a=this.createMergedBlanksRegExp(a);if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.createJoinersRegExp(a);"disabled"!==
this.opt.wildcards&&(a=this.createWildcardsRegExp(a));a=this.createAccuracyRegExp(a);return new RegExp(a,"gm"+(this.opt.caseSensitive?"":"i"))}},{key:"escapeStr",value:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createSynonymsRegExp",value:function(a){var b=this.opt.synonyms,c=this.opt.caseSensitive?"":"i",d=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\x00":"",e;for(e in b)if(b.hasOwnProperty(e)){var f=b[e],g="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(e):
this.escapeStr(e),f="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(f):this.escapeStr(f);""!==g&&""!==f&&(a=a.replace(new RegExp("("+this.escapeStr(g)+"|"+this.escapeStr(f)+")","gm"+c),d+("("+this.processSynonyms(g)+"|")+(this.processSynonyms(f)+")")+d))}return a}},{key:"processSynonyms",value:function(a){if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);return a}},{key:"setupWildcardsRegExp",value:function(a){a=a.replace(/(?:\\)*\?/g,function(a){return"\\"===
a.charAt(0)?"?":"\u0001"});return a.replace(/(?:\\)*\*/g,function(a){return"\\"===a.charAt(0)?"*":"\u0002"})}},{key:"createWildcardsRegExp",value:function(a){var b="withSpaces"===this.opt.wildcards;return a.replace(/\u0001/g,b?"[\\S\\s]?":"\\S?").replace(/\u0002/g,b?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(a){return a.replace(/[^(|)\\]/g,function(a,b,c){b=c.charAt(b+1);return/[(|)\\]/.test(b)||""===b?a:a+"\x00"})}},{key:"createJoinersRegExp",value:function(a){var b=[],
c=this.opt.ignorePunctuation;Array.isArray(c)&&c.length&&b.push(this.escapeStr(c.join("")));this.opt.ignoreJoiners&&b.push("\\u00ad\\u200b\\u200c\\u200d");return b.length?a.split(/\u0000+/).join("["+b.join("")+"]*"):a}},{key:"createDiacriticsRegExp",value:function(a){var b=this.opt.caseSensitive?"":"i",c=this.opt.caseSensitive?"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105 A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010d C\u00c7\u0106\u010c d\u0111\u010f D\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119 E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012b I\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142 L\u0141 n\u00f1\u0148\u0144 N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014d O\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159 R\u0158 s\u0161\u015b\u0219\u015f S\u0160\u015a\u0218\u015e t\u0165\u021b\u0163 T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016b U\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ff Y\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017a Z\u017d\u017b\u0179".split(" "):
"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010dC\u00c7\u0106\u010c d\u0111\u010fD\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012bI\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142L\u0141 n\u00f1\u0148\u0144N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014dO\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159R\u0158 s\u0161\u015b\u0219\u015fS\u0160\u015a\u0218\u015e t\u0165\u021b\u0163T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016bU\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ffY\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017aZ\u017d\u017b\u0179".split(" "),
e=[];a.split("").forEach(function(d){c.every(function(c){if(-1!==c.indexOf(d)){if(-1<e.indexOf(c))return!1;a=a.replace(new RegExp("["+c+"]","gm"+b),"["+c+"]");e.push(c)}return!0})});return a}},{key:"createMergedBlanksRegExp",value:function(a){return a.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(a){var b=this,c=this.opt.accuracy,e="string"===typeof c?c:c.value,d="";("string"===typeof c?[]:c.limiters).forEach(function(a){d+="|"+b.escapeStr(a)});switch(e){default:return"()("+
a+")";case "complementary":return d="\\s"+(d?d:this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~\u00a1\u00bf")),"()([^"+d+"]*"+a+"[^"+d+"]*)";case "exactly":return"(^|\\s"+d+")("+a+")(?=$|\\s"+d+")"}}}]);return a}(),f=function(){function f(a){b(this,f);this.ctx=a;this.ie=!1;a=e.navigator.userAgent;if(-1<a.indexOf("MSIE")||-1<a.indexOf("Trident"))this.ie=!0}c(f,[{key:"log",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"debug",d=this.opt.log;if(this.opt.debug&&"object"===
("undefined"===typeof d?"undefined":a(d))&&"function"===typeof d[c])d[c]("mark.js: "+b)}},{key:"getSeparatedKeywords",value:function(a){var b=this,c=[];a.forEach(function(a){b.opt.separateWordSearch?a.split(" ").forEach(function(a){a.trim()&&-1===c.indexOf(a)&&c.push(a)}):a.trim()&&-1===c.indexOf(a)&&c.push(a)});return{keywords:c.sort(function(a,b){return b.length-a.length}),length:c.length}}},{key:"isNumeric",value:function(a){return Number(parseFloat(a))==a}},{key:"checkRanges",value:function(a){var b=
this;if(!Array.isArray(a)||"[object Object]"!==Object.prototype.toString.call(a[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(a),[];var c=[],d=0;a.sort(function(a,b){return a.start-b.start}).forEach(function(a){var e=b.callNoMatchOnInvalidRanges(a,d),m=e.start,f=e.end;e.valid&&(a.start=m,a.length=f-m,c.push(a),d=f)});return c}},{key:"callNoMatchOnInvalidRanges",value:function(a,b){var c=void 0,d=void 0,e=!1;a&&"undefined"!==typeof a.start?(c=parseInt(a.start,
10),d=c+parseInt(a.length,10),this.isNumeric(a.start)&&this.isNumeric(a.length)&&0<d-b&&0<d-c?e=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(a)),this.opt.noMatch(a))):(this.log("Ignoring invalid range: "+JSON.stringify(a)),this.opt.noMatch(a));return{start:c,end:d,valid:e}}},{key:"checkWhitespaceRanges",value:function(a,b,c){var d=void 0,e=!0,f=c.length,d=b-f;b=parseInt(a.start,10)-d;b=b>f?f:b;d=b+parseInt(a.length,10);d>f&&(d=f,this.log("End range automatically set to the max value of "+
f));0>b||0>d-b||b>f||d>f?(e=!1,this.log("Invalid range: "+JSON.stringify(a)),this.opt.noMatch(a)):""===c.substring(b,d).replace(/\s+/g,"")&&(e=!1,this.log("Skipping whitespace only range: "+JSON.stringify(a)),this.opt.noMatch(a));return{start:b,end:d,valid:e}}},{key:"getTextNodes",value:function(a){var b=this,c="",d=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(a){d.push({start:c.length,end:(c+=a.textContent).length,node:a})},function(a){return b.matchesExclude(a.parentNode)?NodeFilter.FILTER_REJECT:
NodeFilter.FILTER_ACCEPT},function(){a({value:c,nodes:d})})}},{key:"matchesExclude",value:function(a){return g.matches(a,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(a,b,c){var d=this.opt.element?this.opt.element:"mark";a=a.splitText(b);b=a.splitText(c-b);d=document.createElement(d);d.setAttribute("data-markjs","true");this.opt.className&&d.setAttribute("class",this.opt.className);d.textContent=a.textContent;a.parentNode.replaceChild(d,
a);return b}},{key:"wrapRangeInMappedTextNode",value:function(a,b,c,d,e){var f=this;a.nodes.every(function(g,h){var k=a.nodes[h+1];if("undefined"===typeof k||k.start>b){if(!d(g.node))return!1;var k=b-g.start,v=(c>g.end?g.end:c)-g.start,A=a.value.substr(0,g.start),B=a.value.substr(v+g.start);g.node=f.wrapRangeInTextNode(g.node,k,v);a.value=A+B;a.nodes.forEach(function(b,c){c>=h&&(0<a.nodes[c].start&&c!==h&&(a.nodes[c].start-=v),a.nodes[c].end-=v)});c-=v;e(g.node.previousSibling,g.start);if(c>g.end)b=
g.end;else return!1}return!0})}},{key:"wrapGroups",value:function(a,b,c,d){a=this.wrapRangeInTextNode(a,b,b+c);d(a.previousSibling);return a}},{key:"separateGroups",value:function(a,b,c,d,e){c=b.length;for(var f=1;f<c;f++){var g=a.textContent.indexOf(b[f]);b[f]&&-1<g&&d(b[f],a)&&(a=this.wrapGroups(a,g,b[f].length,e))}return a}},{key:"wrapMatches",value:function(a,b,c,d,e){var f=this,g=0===b?0:b+1;this.getTextNodes(function(b){b.nodes.forEach(function(b){b=b.node;for(var e=void 0;null!==(e=a.exec(b.textContent))&&
""!==e[g];){if(f.opt.separateGroups)b=f.separateGroups(b,e,g,c,d);else{if(!c(e[g],b))continue;var h=e.index;if(0!==g)for(var k=1;k<g;k++)h+=e[k].length;b=f.wrapGroups(b,h,e[g].length,d)}a.lastIndex=0}});e()})}},{key:"wrapMatchesAcrossElements",value:function(a,b,c,d,e){var f=this,g=0===b?0:b+1;this.getTextNodes(function(b){for(var h=void 0;null!==(h=a.exec(b.value))&&""!==h[g];){var k=h.index;if(0!==g)for(var t=1;t<g;t++)k+=h[t].length;f.wrapRangeInMappedTextNode(b,k,k+h[g].length,function(a){return c(h[g],
a)},function(b,c){a.lastIndex=c;d(b)})}e()})}},{key:"wrapRangeFromIndex",value:function(a,b,c,d){var e=this;this.getTextNodes(function(f){var g=f.value.length;a.forEach(function(a,d){var l=e.checkWhitespaceRanges(a,g,f.value),h=l.start,m=l.end;l.valid&&e.wrapRangeInMappedTextNode(f,h,m,function(c){return b(c,a,f.value.substring(h,m),d)},function(b){c(b,a)})});d()})}},{key:"unwrapMatches",value:function(a){for(var b=a.parentNode,c=document.createDocumentFragment();a.firstChild;)c.appendChild(a.removeChild(a.firstChild));
b.replaceChild(c,a);this.ie?this.normalizeTextNode(b):b.normalize()}},{key:"normalizeTextNode",value:function(a){if(a){if(3===a.nodeType)for(;a.nextSibling&&3===a.nextSibling.nodeType;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);else this.normalizeTextNode(a.firstChild);this.normalizeTextNode(a.nextSibling)}}},{key:"markRegExp",value:function(a,b){var c=this;this.opt=b;this.log('Searching with expression "'+a+'"');var d=0,e="wrapMatches";this.opt.acrossElements&&(e=
"wrapMatchesAcrossElements");this[e](a,this.opt.ignoreGroups,function(a,b){return c.opt.filter(b,a,d)},function(a){d++;c.opt.each(a)},function(){0===d&&c.opt.noMatch(a);c.opt.done(d)})}},{key:"mark",value:function(a,b){var c=this;this.opt=b;var d=0,e="wrapMatches",f=this.getSeparatedKeywords("string"===typeof a?[a]:a),g=f.keywords,h=f.length,f=function v(a){var b=(new k(c.opt)).create(a),f=0;c.log('Searching with expression "'+b+'"');c[e](b,1,function(b,e){return c.opt.filter(e,a,d,f)},function(a){f++;
d++;c.opt.each(a)},function(){0===f&&c.opt.noMatch(a);g[h-1]===a?c.opt.done(d):v(g[g.indexOf(a)+1])})};this.opt.acrossElements&&(e="wrapMatchesAcrossElements");0===h?this.opt.done(d):f(g[0])}},{key:"markRanges",value:function(a,b){var c=this;this.opt=b;var d=0,e=this.checkRanges(a);e&&e.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(e)),this.wrapRangeFromIndex(e,function(a,b,d,e){return c.opt.filter(a,b,d,e)},function(a,b){d++;c.opt.each(a,b)},function(){c.opt.done(d)})):
this.opt.done(d)}},{key:"unmark",value:function(a){var b=this;this.opt=a;var c=this.opt.element?this.opt.element:"*",c=c+"[data-markjs]";this.opt.className&&(c+="."+this.opt.className);this.log('Removal selector "'+c+'"');this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(a){b.unwrapMatches(a)},function(a){var d=g.matches(a,c);a=b.matchesExclude(a);return!d||a?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(a){this._opt=d({},{element:"",className:"",
exclude:[],iframes:!1,iframesTimeout:5E3,separateWordSearch:!0,acrossElements:!1,ignoreGroups:0,each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:e.console},a)},get:function(){return this._opt}},{key:"iterator",get:function(){return new g(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]);return f}();return function(a){var b=this,c=new f(a);this.mark=function(a,d){c.mark(a,d);return b};this.markRegExp=function(a,d){c.markRegExp(a,
d);return b};this.markRanges=function(a,d){c.markRanges(a,d);return b};this.unmark=function(a){c.unmark(a);return b};return this}});var J="busy_mask",ha=function(a){this.$e=$(a);this.mask=$('<div class="loading-mask"></div>');this.$e.data(J,this);this.$e.is("body")?this.$e.append(this.mask):(this.$e.after(this.mask),a=this.$e[0],this.mask.css("width",a.offsetWidth+"px").css("height",a.offsetHeight+"px").css("left",a.offsetLeft+"px").css("top",a.offsetTop+"px"))};ha.prototype.destroy=function(){this.mask.remove();
this.$e.data(J,null)};e.showBusy=function(a,b){a||(a=document.body);b?fa(a):($(a).data("delay_busy_mask",!0),setTimeout(function(){null!=$(a).data("delay_busy_mask")&&fa(a)},500))};e.clearBusy=function(a){a||(a=document.body);$(a).data("delay_busy_mask",null);$(a).removeClass("loading-mask-cover");ga(a)};e.notification=function(){function a(){F(u,[y,v,A,1])}function b(){for(var a=G(w)||[],b=0,c=a.length;b<c;b++){var d=a[b].createdBy;d.image=readS3(d.image)}return a}function c(a){for(var b=X()?ua:
Y,c=0,d=a.length;c<d;c++){var e=a[c].createdBy;e.image=b(e.image)}F(w,a)}function d(d,f){if(!B){var m=currentUser();w="notifs:"+m;u="notf.rd:"+m;e.loadedNotisBeforeOpen=b();m=G(u)||[];y=m[0];v=m[1]||0;A=m[2]||0;1!=m[3]&&(y=A=null,c([]),a());B=$(f||"#notification");var n=B.parent(),m=n.find(".arrow-dropdown-menu");D=m.find(".mk-rd-btn");z=B.find(".notification-count");x=n.find(".ntf-list");C=new p(x.parent().parent()[0]);m.on("click","li",function(a){if(!$(a.target).closest("a")[0]){var b=$(a.currentTarget).data("url");
b?(a=$('<a href="'+b+'"></a>').appendTo(document.body),a[0].click(),a.remove()):a.stopPropagation()}}).on("click",".mk-rd-btn",function(a){h();a.stopPropagation();a.preventDefault()}).on("click",".notification-action a",function(a){n.removeClass("open")}).on("click",".scroller-btn",function(a){a.target.blur();r&&clearTimeout(r);x.parent().removeClass("scroll-hint");r=null;C.scrollToTop()});n.on("shown.bs.dropdown",k);m=$(n.find(".arrow-dropdown-menu .dropdown-header")[0].lastChild).text().trim();
ba(B[0],m);d||(g(),setInterval(g,l))}}function g(){if("hidden"==document.visibilityState){if(0<--q)return;q=15}sendQS(["notif.cnt",Da()],n,function(a){E&&E(a)})}function k(){I();x.parent().addClass("loading");f(!0)}function f(d){sendQS(["notifs",[y,v,d]],function(e){var f=e.shift();A=Math.max(A||0,f.loadAt||0);y=Math.max(A,y||0,e[0]?e[0].createdAt.epoch||0:0);var g=b(),h=v!=f.markAt;v=f.markAt;delete f.loadAt;delete f.markAt;if(g.length&&e.length){for(var l=[],k=0,n=e.length;k<n;k++){var t=e[k],p;
a:{p=t.url;for(var q=t.createdAt.epoch,r=0,w=g.length;r<w;r++){var u=g[r];if(q==u.createdAt.epoch&&p==u.url){p=!0;break a}}p=void 0}p||l.push(t)}e=l}loadedNotisBeforeOpen=g=$.merge(e,g);for(var x in f)for(k=0,n=g.length;k<n;k++)e=g[k],e.oid==x&&f[x]>=e.createdAt.epoch&&delete e.unread;f=g.length-150;0<f&&g.splice(150,f);if(h)for(h=g,f=0,k=h.length;f<k;f++)n=h[f],n.createdAt.epoch<=v&&delete n.unread;c(g);a();d&&m()},function(a){d&&m()})}function h(){var c=b();c.length&&(c=c[0].createdAt.epoch,v!=
c&&(v=c,a(),sendQS(["notif.rd",v],function(){t()},function(a){t()})))}function m(c){x.parent().removeClass("loading").removeClass("scroll-hint");x.empty();var d=b(),e=d.length,f;if(e){var g=x.parent()[0],h=g.scrollHeight,k=[],l=!1;f=g.scrollTop;for(var m=0,t=d.length;m<t;m++){var p=d[m],q=p.createdBy,r=p.createdAt,u=r.epoch,r=va(u)||r.message,w=u>A;(u=w||p.unread&&u>v)&&(l=!0);$.merge(k,['<li class="notification-item ',u?w?"trans":"old":"read",'" data-url="',p.url,'">',P(q.image,q.name,q.initials,
q.iconColor,"x40","pull-left circle"),'<div class="desc">','<div class="notification-action">',p.message,"</div>",'<div class="notification-time">',r,"</div>","</div>","</li>"])}x.html(k.join(""));60<f?(f+=g.scrollHeight-h,x.find(".trans").length&&(x.parent().addClass("scroll-hint"),x.find(".trans").removeClass("trans"))):x.find(".trans").each(function(){var a=$(this),b=this.offsetHeight;a.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(b){a.removeClass("trans in").css("height",
"")});a.height(0);M(this);a.height(b);setTimeout(function(){$(this).addClass("in")},0)})}else f=0;c||(n(0),e&&(c=d[0].createdAt.epoch,A!=c&&(A=c,a())));D[l?"removeClass":"addClass"]("hide");C.scrollTo(f);C.syncSize(500)}function t(){var a=b();if(a.length){for(var d=x.children(),e=0,f=d.length;e<f;e++)$(d[e]).addClass("read").removeClass("old"),delete a[e].unread;D.addClass("hide");c(a)}}function n(a){B[0<a?"addClass":"removeClass"]("hasNew");z.html(a);B.trigger("updateNotificationCount",[a]);0<a&&
f(!1)}var l=isCE?1E5:6E4,q=15,r,w,u,y,v,A,B,z,x,D,C,E;e.setNotifCount=function(a){currentUser()&&(d(),n(a))};e.openNotification=function(){d();k()};e.extensionInit=function(a,b){E=b;d(!1,a)};return{init:function(a){d(a)}}}();var K="rfr.sent";e.sessRefer=function(){return N("rfr",!1)||""};var q=document.referrer,u;/[?&]gclid=/.test(u=location.href)&&(q=(q||"")+u.substring(u.indexOf("?")));q&&0>q.indexOf("//"+location.host)&&H("rfr",q,!1);var p=function(a,b){this.$e=$(a);this.options=$.extend({},p.DEFAULTS,
b);this.full=this.sizeDirty=!1;this.init()};p.DEFAULTS={horizontal:!1,visible:"hover",detectResize:!0,wheelRate:.2,preventDefault:!0};p.prototype.init=function(){var a=this.$e,b=a[0],c=this.options,d=this,g=c.horizontal;a.addClass("scrolled").addClass(g?"horizontal":"vertical");"static"==e.getComputedStyle(b,null).getPropertyValue("position")&&(b.style.position="relative");this.inner=a.children()[0];this.bar=b=$('<div class="scroller"><div class="scroller-track"><div class="scroller-handle"></div></div></div>');
b.addClass("visible-"+c.visible);a.append(b);this.track=b.find(".scroller-track")[0];this.handle=b.find(".scroller-handle")[0];if(browser.mobile)$(this.inner).on("touchmove",function(a){a.stopPropagation()}).on("scroll",function(b){d.syncPosition();a.trigger("scroll")});else{var k=new L(b[0],{dragTarget:".scroller-handle",renderer:new D(this),ignore:function(){return d.full}});a.on("click",".scroller-track",function(a){if(a.target!=d.handle){var b=a.originalEvent,b=g?b.offsetX:b.offsetY;b||(b=$(a.target).offset(),
b=g?a.pageX-b.left:a.pageY-b.top);d.scrollTo(Math.round((b-d.handleSize()/2)*d.contentSize/d.trackSize()))}}).on(browser.firefox?"DOMMouseScroll":"mousewheel",function(a){d.full||k.dragging||(a=a.originalEvent,d.scrollBy(Math.round((browser.firefox?40*a.detail:-a.wheelDelta)*c.wheelRate)),c.preventDefault&&a.preventDefault())})}if(c.detectResize)$(e).on("resize",function(a){d.syncSize(500)});this.syncSize()};p.prototype.scrollBy=function(a){this.scrollTo(a+this.position())};p.prototype.scrollTo=function(a){this.contentSize&&
(a=Math.max(0,Math.min(this.boundPosition(),a)),$(this.inner)[this.options.horizontal?"scrollLeft":"scrollTop"](a),this.syncPosition(a),this.$e.trigger("scroll"))};p.prototype.scrollToTop=function(){Q(this,0,this.inner.scrollTop,0-this.inner.scrollTop,500)};p.prototype.scrollToBottom=function(){Q(this,0,this.inner.scrollTop,this.boundPosition-this.inner.scrollTop,500)};p.prototype.position=function(){return this.inner[this.options.horizontal?"scrollLeft":"scrollTop"]};p.prototype.trackSize=function(){this._trackSize||
(this._trackSize=this.options.horizontal?this.track.offsetWidth:this.track.offsetHeight);return this._trackSize};p.prototype.handleSize=function(){this._handleSize||(this._handleSize=this.options.horizontal?this.handle.offsetWidth:this.handle.offsetHeight);return this._handleSize};p.prototype.boundPosition=function(){return this.contentSize?Math.max(0,this.contentSize-this.viewportSize):0};p.prototype.syncSize=function(a){if(a){this.sizeDirty=!0;var b=this;setTimeout(function(){b.sizeDirty&&b._syncSize();
b.sizeDirty=!1},a)}else this._syncSize()};p.prototype._syncSize=function(){this[this.options.horizontal?"_syncWidth":"_syncHeight"]()};p.prototype._syncWidth=function(){var a=this.contentSize=this.inner.scrollWidth,b=this.viewportSize=this.inner.clientWidth;this._trackSize=this._handleSize=null;this.full=b>=a;this.bar[this.full?"addClass":"removeClass"]("full");this.handle.style.width=b/a*100+"%";this._syncLeft()};p.prototype._syncHeight=function(){var a=this.contentSize=this.inner.scrollHeight,b=
this.viewportSize=this.inner.clientHeight;this._trackSize=this._handleSize=null;this.full=b>=a;this.bar[this.full?"addClass":"removeClass"]("full");this.handle.style.height=b/a*100+"%";this._syncTop()};p.prototype.syncPosition=function(a){this[this.options.horizontal?"_syncLeft":"_syncTop"](a)};p.prototype._syncLeft=function(a){this.handle.style.left=(a||this.inner.scrollLeft)/this.contentSize*100+"%"};p.prototype._syncTop=function(a){this.handle.style.top=(a||this.inner.scrollTop)/this.contentSize*
100+"%"};u=function(){};u.prototype.setup=function(a){this.dragger=a};u.prototype.start=function(a,b){var c=$(b.outerHtml);this.ghost=c;c.addClass("dragger-ghost hide");this.dragger.$e.append(c);$(b).addClass("dragged");c.style.left=b.offsetLeft+"px";c.style.top=b.offsetTop+"px";this.startOffsetLeft=b.offsetLeft-a.clientX;this.startOffsetTop=b.offsetTop-a.clientY;c.removeClass("hide")};u.prototype.move=function(a,b){this.ghost.css({left:this.startOffsetLeft+a.clientX+"px",top:this.startOffsetTop+
a.clientY+"px"})};u.prototype.end=function(a,b){$(b).removeClass("dragged");this.ghost.addClass("hide").remove()};var D=function(a){this.scroller=a};D.prototype=$.extend({},u.prototype);D.prototype.start=function(a,b){e.getSelection?e.getSelection().removeAllRanges():document.selection.createRange&&(document.selection.createRange(),document.selection.empty());$(b).addClass("dragged").parent().parent().addClass("scrolling");this.startPos=this.scroller.position();this.startEventPos=this.scroller.options.horizontal?
a.clientX:a.clientY};D.prototype.move=function(a,b){var c=this.scroller;a.preventDefault();c.scrollTo(this.computeScrollPosition(c.options.horizontal?a.clientX:a.clientY))};D.prototype.computeScrollPosition=function(a){var b=this.scroller;return this.startPos+Math.round((a-this.startEventPos)*b.contentSize/b.trackSize())};D.prototype.end=function(a,b){$(b).removeClass("dragged").parent().parent().removeClass("scrolling")};var L=function(a,b){this.$e=$(a);this.options=$.extend({},L.DEFAULTS,b);this._init=
this.dragging=!1;this.init()};L.DEFAULTS={moveThreshold:3,dragTarget:".dragger-target",ignore:function(a){a=$(a.target);return a.is("input")||a.is("textarea")},renderer:new u};L.prototype.init=function(){var a=this,b=this.options;this.$e.addClass("dragger");b.renderer.setup(this);this.$e.on("mousedown",b.dragTarget,function(c){if(!b.ignore(c)){a._init=!0;var d=c.originalEvent;a.initClientPos=new V(d.clientX,d.clientY);a.dragged=c.currentTarget}});$(document).on("mousemove",function(c){if(a._init||
a.dragging)c=c.originalEvent,a.dragging?b.renderer.move(c,a.dragged):(new V(c.clientX,c.clientY)).distanceTo(a.initClientPos)>b.moveThreshold&&(a._init=!1,a.dragging=!0,b.renderer.start(c,a.dragged))}).on("mouseup",function(c){a.dragging&&c.preventDefault();a._init=!1;a.dragging&&(a.dragging=!1,b.renderer.end(c.originalEvent,a.dragged),a.dragged=null)})};browser.ie&&(e.onhelp=function(){return!1});var r=function(a,b,c){this.$element=a;this.$list=b;this.options=$.extend({},r.DEFAULTS,c);this.offset=
0;this.currentLen=this.options.pageSize;this.inp=a.find("input");this.orderBy=this.currentOrg=this.currentCategory=this.currentText=null;var d=this,e,k;a.on("click",".close",function(a){d.inp[0].value="";d.options.dropdown?d.$element.removeClass("dirty").removeClass("open"):d.search();d.inp.focus()}).on("focus","input",function(b){a.addClass("active")}).on("blur","input",function(b){0==d.inp[0].value.trim().length&&a.removeClass("active")}).on("keydown change","input",function(a){e&&clearTimeout(e);
e=setTimeout(function(){var a=d.inp.val();a!=k&&(k=a,d.search())},350)})};r.DEFAULTS={pageSize:30,dropdown:!1};r.prototype.search=function(){var a=this.inp.val().trim(),b=this.options.pageSize,c=0==a.length,d=c?Math.max(this.currentLen,b):b,e=this;this.$element.toggleClass("dirty",!c);S(a,this.currentCategory,0,d+1,this.currentOrg,this.orderBy,function(b){"string"==$.type(b)?showAlert($("#body"),b,"alert-danger"):(e.currentText=c?null:a,e.afterLoad(b.length>d,b),e.$element.toggleClass("open",!c).toggleClass("empty",
0==b.length),e.options.dropdown||e.syncSearchText())})};r.prototype.syncSearchText=function(){var a=this.currentText||"",b=e.location.search;b.startsWith("?text=")&&(b="");b=b.length?b.split("&"):[];1<b.length&&b.pop();a.length?b.length?(b.push("text="+a),a=b.join("&")):a="?text="+a:a=b.length?b[0]:"/apps";history.replaceState(null,null,a)};r.prototype.loadCategory=function(a){var b=this.options.pageSize,c=this,d,e,k=a?"?category="+a:"/apps";switch(a){case "all":a=null;break;case "new":a=null;e="byNew";
break;case "quire":a=null;d="YUoTGc5byLS1MM5BGD8B81MR";break;default:a||(e="byPopular")}S(this.currentText,a,0,b+1,d,e,function(f){if("string"==$.type(f))showAlert($("#body"),f,"alert-danger");else{c.offset=b;c.currentLen=f.length;c.currentCategory=a;c.currentOrg=d;c.orderBy=e;var h=f.length>b;h&&c.currentLen--;c.afterLoad(h,f);history.replaceState(null,null,k);c.options.dropdown||c.syncSearchText();c.syncActiveItem()}})};r.prototype.syncActiveItem=function(){$(".app-category .active").removeClass("active");
var a=/[?&]category(=([^&#]*)|&|#|$)/.exec(e.location.href),a=a&&a[2];$('.category-sidebar a[href="'+(a?"?category="+a:"/apps")+'"]').parent().addClass("active")};r.prototype.loadMore=function(){var a=this.options.pageSize,b=this.offset+a,c=this;S(this.currentText,this.currentCategory,b,a+1,this.currentOrg,this.orderBy,function(d){if("string"==$.type(d))showAlert($("#body"),d,"alert-danger");else{c.offset=b;c.currentLen+=d.length;var e=d.length>a;e&&c.currentLen--;c.afterLoad(e,d,!0)}})};r.prototype.afterLoad=
function(a,b,c){this.$list.toggleClass("more",a);a&&b.pop();this.renderResult(b,c)};r.prototype.renderResult=function(a,b){for(var c=this.options.dropdown,d=a.length,e=[],k=0;k<d;k++){var f=a[k];$.merge(e,c?['<li class="u-item">','<a href="',f.url,'">',P(f.image,f.nameText,f.initials,f.iconColor,"x32","pull-left"),'<div class="name">',f.nameText,"</div>",'<div class="desc">',f.shortdesc,"</div>","</a>","</li>"]:['<a class="app-item" href="',f.url,'">',P(f.image,f.nameText,f.initials,f.iconColor,"x64"),
'<h3 class="name">',f.nameText,"</h3>","<p>",f.shortdesc,"</p>","</a>"])}this.$list[b?"append":"html"](e.join(""))};$(function(){function a(){gaWS("print",e.location.search)}var b=$("body").data("init");if(b)for(var c={home:Fa,"all-need":Ia,website:ja,"web-header":ka,"web-header-menu":ka,"work-header":Ja,blog:Ka,auth:La,"app-directory":Oa,"app-profile":Pa,"app-doc":Na,ical:Qa},b=b.split(","),d=0,g=b.length;d<g;d++){var k;(k=c[b[d].trim()])&&k()}e.matchMedia&&e.matchMedia("print").addListener(function(b){b.matches&&
a()});e.addEventListener("beforeprint",a);var f=$("body").data("user-id");(b=N("qrnpg",!1))&&H("qrnpg");if(null!=f&&(c=$.cookie("qrui"))&&!(f||"-").startsWith(c)&&!b){H("qrnpg","t",!1);b=location.href;location.href=b+(0<=b.indexOf("?")?"&":"?")+"_R_="+(new Date).getTime();return}b=$('a[href="/r/logout"]');b.attr("href","#");b.click(function(){function a(){e.location="/r/logout"}gae("acc","logout");if(!f)return a();var b=f.substring(0,7);cacheDal.put("navi:"+b);F("notifs:"+f);F("notf.rd:"+f);e.caches&&
caches.delete("sw-s3-cache");cacheDal.get("tc:metas",function(c){var d;if(c){for(var e=c.length;0<=--e;)b==c[e][4]&&(cacheDal.put("tc:"+c[e][0]+b),c.splice(e,1),d=!0);d&&cacheDal.put("tc:metas",c,function(){a()})}d||a()});setTimeout(a,1500)})})})(window);
